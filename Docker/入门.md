## 使用场景:

- 简化配置，构建一次可以在任意环境运行。
- 提高开发效率，入职第一天搞环境？不需要，直接docker。标配环境
- 应用隔离，服务器整合
- 快速部署
- 自动化扩容
- 更适合微服务


镜像：类似于虚拟机镜像。容器：类似一个轻量级的沙箱。仓库：类似于代码仓库。

```shell
➜  ~ docker version
Client:
 Version:	17.12.0-ce
 API version:	1.35
 Go version:	go1.9.2
 Git commit:	c97c6d6
 Built:	Wed Dec 27 20:03:51 2017
 OS/Arch:	darwin/amd64

Server:
 Engine:
  Version:	17.12.0-ce
  API version:	1.35 (minimum version 1.12)
  Go version:	go1.9.2
  Git commit:	c97c6d6
  Built:	Wed Dec 27 20:12:29 2017
  OS/Arch:	linux/amd64
  Experimental:	true
```




## 镜像:

```Shell
#下载镜像文件到本地  docker pull name[:tag] 默认tag为latest
➜  ~ docker pull ubuntu:14.04
14.04: Pulling from library/ubuntu
#也可以直接从远端获取 docker pull hub.c.163.com/public/ubuntu:14.04

#查看本地已经下载的镜像列表 -a 查看所有信息 -q只输出ID信息
➜  ~ docker images
REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE
ubuntu                         14.04               dc4491992653        4 weeks ago         222MB
local_topology                 latest              ebb6ac1b94ed        6 months ago        579MB

# 打标签
➜  ~ docker tag ubuntu:14.04 myunbuntu:latest

# 获取详细信息
➜  ~ docker inspect ubuntu:14.04
[
    {
        "Id": "sha256:dc4491992653ecf02ae2d0e9d3dbdaab63af8ccdcab87ee0ee7e532f7087dd73",
        "RepoTags": [
            "myunbuntu:latest",
            "ubuntu:14.04"
        ],
#获取详细信息里面的单向
➜  ~ docker inspect -f {{".RepoTags"}} ubuntu:14.04
[myunbuntu:latest ubuntu:14.04]

#搜索镜像
➜  ~ docker search nginx
NAME                                                   DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
nginx                                                  Official build of Nginx.                        8014                [OK]
jwilder/nginx-proxy                                    Automated Nginx reverse proxy for docker con…   1282                                    [OK]
richarvey/nginx-php-fpm                                Container running Nginx + PHP-FPM capable of…   526

#删除镜像 可以直接跟着镜像ID删除
➜  ~ docker rmi myunbuntu:latest #只是删除对应标签
Untagged: myunbuntu:latest
➜  ~ docker rmi ubuntu:14.04 #删除
Untagged: ubuntu:14.04
Untagged: ubuntu@sha256:e1c8bff470c771c6e86d3166607e2c74e6986b05bf339784a9cab70e0e03c7c3
Deleted: sha256:dc4491992653ecf02ae2d0e9d3dbdaab63af8ccdcab87ee0ee7e532f7087dd73
Deleted: sha256:1239c33230909cc231da97b851df65e252dc9811dcee2af0ecf3b225e2805a31
Deleted: sha256:ce4caf69568d9109febd1f5307b62d85ab84e7a947fded041be49c847b412e5a
Deleted: sha256:4c711cc0452303f0fb6ce885c84130e32bb649b03f690fd0e4626a874b1cc8cf
Deleted: sha256:a375921af0e34b1cb09a35af24265db01b1eb65edabadaf70d56505a60a6de2b
Deleted: sha256:c41b9462ea4bbc2f578e42bd915214d54948d960b9b8c6815daf8586811c2d38

#在有对应的容器下是无法删除的
➜  ~ docker rmi -f ubuntu:14.04 #强行删除

#导出镜像为压缩文件
➜  ~ docker save -o redis.tar redis:latest
#导入镜像文件
➜  ~ docker load --input redis.tar
Loaded image: redis:latest

#上传镜像到Docker Hub官方仓库
docker push name[:tag] user/test:latest
```

#### 创建镜像：

1）基于已经用的镜像创建，2）基于本地模板创建，3）基于Dockerfile创建。

### 搜索镜像：

docker search

docker ps -a

docker run --name mydocker -it centos /bin/bash

docker run -P -d --name mysnginx1 nginx

docker run -d -p 81:80 --name=mynginx2 nginx